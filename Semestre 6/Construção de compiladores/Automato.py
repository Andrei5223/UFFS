class Automaton:
    def __init__(self):
        # Definimos as transições do autômato usando um dicionário
        # O estado atual e o símbolo de entrada determinam o próximo estado
        self.transitions = {
            '0': {'s': '1', 'e': '6', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '15', '1': '15', '2': '15', '3': '15', '4': '15', '5': '15', '6': '15', '7': '15', '8': '15', '9': '15', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '1': {'s': '14', 'e': '2', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '2': {'s': '14', 'e': '14', 'n': '3', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '3': {'s': '14', 'e': '14', 'n': '14', 'a': '4', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '4': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '5', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '5': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '6': {'s': '14', 'e': '14', 'n': '7', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '7': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '14', 'q': '8', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '8': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '9', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '9': {'s': '14', 'e': '14', 'n': '14', 'a': '10', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '10': {'s': '14', 'e': '14', 'n': '11', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '11': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '12', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '12': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '13', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '13': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '14': {'s': '14', 'e': '14', 'n': '14', 'a': '14', 'o': '14', 'q': '14', 'u': '14', 't': '14', 'b': '14', 'c': '14', 'd': '14', 'f': '14', 'g': '14', 'h': '14', 'i': '14', 'j': '14', 'k': '14', 'l': '14', 'm': '14', 'p': '14', 'r': '14', 'v': '14', 'w': '14', 'x': '14', 'y': '14', 'z': '14', 'A': '14', 'B': '14', 'C': '14', 'D': '14', 'E': '14', 'F': '14', 'G': '14', 'H': '14', 'I': '14', 'J': '14', 'K': '14', 'L': '14', 'M': '14', 'N': '14', 'O': '14', 'P': '14', 'Q': '14', 'R': '14', 'S': '14', 'T': '14', 'U': '14', 'V': '14', 'W': '14', 'X': '14', 'Y': '14', 'Z': '14', '0': '14', '1': '14', '2': '14', '3': '14', '4': '14', '5': '14', '6': '14', '7': '14', '8': '14', '9': '14', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '15': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '15', '1': '15', '2': '15', '3': '15', '4': '15', '5': '15', '6': '15', '7': '15', '8': '15', '9': '15', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '16': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '17': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '18': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '19': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '20': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '21': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '22': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '23': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '24': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '25': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '26': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '27': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '28': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '29': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '30': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'},
            '31': {'s': '16', 'e': '16', 'n': '16', 'a': '16', 'o': '16', 'q': '16', 'u': '16', 't': '16', 'b': '16', 'c': '16', 'd': '16', 'f': '16', 'g': '16', 'h': '16', 'i': '16', 'j': '16', 'k': '16', 'l': '16', 'm': '16', 'p': '16', 'r': '16', 'v': '16', 'w': '16', 'x': '16', 'y': '16', 'z': '16', 'A': '16', 'B': '16', 'C': '16', 'D': '16', 'E': '16', 'F': '16', 'G': '16', 'H': '16', 'I': '16', 'J': '16', 'K': '16', 'L': '16', 'M': '16', 'N': '16', 'O': '16', 'P': '16', 'Q': '16', 'R': '16', 'S': '16', 'T': '16', 'U': '16', 'V': '16', 'W': '16', 'X': '16', 'Y': '16', 'Z': '16', '0': '16', '1': '16', '2': '16', '3': '16', '4': '16', '5': '16', '6': '16', '7': '16', '8': '16', '9': '16', '=': '17', '+': '18', '-': '19', '*': '20', '/': '21', '(': '22', ')': '23', '{': '24', '}': '25', ';': '26', '>': '27', '<': '28', '!': '29', '\n': '31', '\t': '30', ' ': '30', '$': '30'}
            }
        self.initial_state = '0'
        self.separators = ['=', '+', '-', '*', '/', '(', ')', '{', '}', ';', '>', '<', '!', '\n', '\t', ' ', '$']
        self.accept_states = {'2': 'SE',
                              '3': 'VAR',
                              '4': 'VAR',
                              '5': 'SENAO',
                              '6': 'VAR',
                              '7': 'VAR',
                              '8': 'VAR',
                              '9': 'VAR',
                              '10': 'VAR',
                              '11': 'VAR',
                              '12': 'VAR',
                              '13': 'ENQUANTO',
                              '14': 'VAR',
                              '15': 'NUM', 
                              '16': 'ERRO',
                              '17': 'ATRIB',
                              '18': 'MAIS',
                              '19': 'MENOS',
                              '20': 'MULTI',
                              '21': 'DIV',
                              '22': 'PARE',
                              '23': 'PARD',
                              '24': 'CHAE',
                              '25': 'CHAD',
                              '26': 'PVIRGULA',
                              '27': 'MAIOR',
                              '28': 'MENOR',
                              '29': 'DIF',
                              '30': 'BRANCO',
                              '31': 'LINHA'
                             }


    def process(self, input_string, fita):
        # Começamos no estado inicial
        state = self.initial_state
        string = ''
        count = 1
        
        # Processa cada símbolo da string de entrada
        for symbol in input_string:

            # Move para o próximo estado baseado na transição
            if symbol in self.transitions[state]:

                # Ao encontrar um separador
                if symbol in self.separators:
                    # Caso o automato já tenha reconhecido algo, grava o token do estado na fita e tabela de símbolos
                    if state != self.initial_state:
                        fita.append((count, self.accept_states[state], string))

                    # Percorre o automato para identificar o separador
                    string = symbol
                    state = self.transitions[state][symbol]

                    # Adiciona uma linha
                    if state == '31':
                        count += 1

                    # Se o separador não for \n, \t ou espaço em branco, salva o seu token na fita
                    if state != '30' and state != '31':
                        fita.append((count, self.accept_states[state], string))

                    # Reinicia o autômato para o próximo símbolo
                    state = self.initial_state
                    string = ''

                # Caso não seja separador
                else:
                    # Continua percorrendo o autômato
                    string += symbol
                    state = self.transitions[state][symbol]
            else:
                return fita
        
        # Retorna a fita com a tabela de símbolos
        return fita

# Exemplo de uso
automaton = Automaton()

# Abrindo o arquivo input.txt e lendo a string de entrada
with open('input.txt', 'r') as file:
    input_string = file.read().strip()

# Testando o autômato com a string de entrada
fita = []
fita = automaton.process(input_string, fita)
print(fita)

class glc:
    def __init__(self, simbolo, prod):
        self.simbolo = simbolo
        self.prod = prod

gramatica = {
    0: glc("S", ["Prog"]),
    1: glc("Prog", ["Decl", "Prog"]),
    2: glc("Prog", ["Cond", "Prog"]),
    3: glc("Prog", ["Loop", "Prog"]),
    4: glc("Prog", []),
    5: glc("Decl", ["VAR", "ATRIB", "Expr", "PVIRGULA"]),
    6: glc("Expr", ["Expr", "MAIS", "Termo"]),
    7: glc("Expr", ["Expr", "MENOS", "Termo"]),
    8: glc("Expr", ["Termo"]),
    9: glc("Termo", ["Termo", "MULTI", "Fator"]),
    10: glc("Termo", ["Termo", "DIV", "Fator"]),
    11: glc("Termo", ["Fator"]),
    12: glc("Fator", ["PARE", "Expr", "PARD"]),
    13: glc("Fator", ["NUM"]),
    14: glc("Fator", ["VAR"]),
    15: glc("Cond", ["SE", "PARE", "Vali", "PARD", "Bloco"]),
    16: glc("Cond", ["SE", "PARE", "Vali", "PARD", "Bloco", "SENAO", "Bloco"]),
    17: glc("Loop", ["ENQUANTO", "PARE", "Vali", "PARD", "Bloco"]),
    18: glc("Vali", ["Expr", "ATRIB", "ATRIB", "Expr"]),
    19: glc("Vali", ["Expr", "MAIOR", "Expr"]),
    20: glc("Vali", ["Expr", "MENOR", "Expr"]),
    21: glc("Vali", ["Expr", "MAIOR", "ATRIB", "Expr"]),
    22: glc("Vali", ["Expr", "MENOR", "ATRIB", "Expr"]),
    23: glc("Vali", ["Expr", "DIF", "ATRIB", "Expr"]),
    24: glc("Vali", ["PARE", "Vali", "PARD"]),
    25: glc("Bloco", ["CHAE", "Bloco", "CHAD"])
}


slr = {
    0: {"ACTION": {"VAR": ("s", 5), "SE": ("s", 6) ,"ENQUANTO": ("s", 7), "CHAD": ("r", 4), "$": ("r", 4)}, 
        "GOTO": {"Prog": 1, "Decl": 2, "Cond": 3, "Loop": 4}},
    1: {"ACTION": {"$": ("acc", 100)}, 
        "GOTO": {}},
    2: {"ACTION": {"VAR": ("s", 5), "SE": ("s", 6) ,"ENQUANTO": ("s", 7), "CHAD": ("r", 4), "$": ("r", 4)}, 
        "GOTO": {"Prog": 8, "Decl": 2, "Cond": 3, "Loop": 4}},
    3: {"ACTION": {"VAR": ("s", 5), "SE": ("s", 6) ,"ENQUANTO": ("s", 7), "CHAD": ("r", 4), "$": ("r", 4)}, 
        "GOTO": {"Prog": 9, "Decl": 2, "Cond": 3, "Loop": 4}},
    4: {"ACTION": {"VAR": ("s", 5), "SE": ("s", 6) ,"ENQUANTO": ("s", 7), "CHAD": ("r", 4), "$": ("r", 4)}, 
        "GOTO": {"Prog": 10, "Decl": 2, "Cond": 3, "Loop": 4}},
    5: {"ACTION": {"ATRIB": ("s", 11)}, 
        "GOTO": {}},
    6: {"ACTION": {"PARE": ("s", 12)}, 
        "GOTO": {}},
    7: {"ACTION": {"PARE": ("s", 13)}, 
        "GOTO": {}},
    8: {"ACTION": {"CHAD": ("r", 1), "$": ("r", 1)}, 
        "GOTO": {}},
    9: {"ACTION": {"CHAD": ("r", 2), "$": ("r", 2)}, 
        "GOTO": {}},
    10: {"ACTION": {"CHAD": ("r", 3), "$": ("r", 3)}, 
        "GOTO": {}},
    11: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 14, "Termo": 15, "Fator": 16}},
    12: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 22), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 21, "Termo": 15, "Fator": 16, "Vali": 20}},
    13: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 22), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 21, "Termo": 15, "Fator": 16, "Vali": 23}},
    14: {"ACTION": {"PVIRGULA": ("s", 24), "MAIS": ("s", 25), "MENOS": ("s", 26)}, 
        "GOTO": {}},
    15: {"ACTION": {"ATRIB": ("r", 8), "PVIRGULA": ("r", 8), "MAIS": ("r", 8), "MENOS": ("r", 8), "MULTI": ("s", 27), "DIV": ("s", 28), "PARD": ("r", 8), "MAIOR": ("r", 8), "MENOR": ("r", 8), "DIF": ("r", 8)}, 
        "GOTO": {}},
    16: {"ACTION": {"ATRIB": ("r", 11), "PVIRGULA": ("r", 11), "MAIS": ("r", 11), "MENOS": ("r", 11), "MULTI": ("r", 11), "DIV": ("r", 11), "PARD": ("r", 11), "MAIOR": ("r", 11), "MENOR": ("r", 11), "DIF": ("r", 11)}, 
        "GOTO": {}},
    17: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 29, "Termo": 15, "Fator": 16}},
    18: {"ACTION": {"ATRIB": ("r", 13), "PVIRGULA": ("r", 13), "MAIS": ("r", 13), "MENOS": ("r", 13), "MULTI": ("r", 13), "DIV": ("r", 13), "PARD": ("r", 13), "MAIOR": ("r", 13), "MENOR": ("r", 13), "DIF": ("r", 13)}, 
        "GOTO": {}},
    19: {"ACTION": {"ATRIB": ("r", 14), "PVIRGULA": ("r", 14), "MAIS": ("r", 14), "MENOS": ("r", 14), "MULTI": ("r", 14), "DIV": ("r", 14), "PARD": ("r", 14), "MAIOR": ("r", 14), "MENOR": ("r", 14), "DIF": ("r", 14)}, 
        "GOTO": {}},
    20: {"ACTION": {"PARD": ("s", 30)},
        "GOTO": {}},
    21: {"ACTION": {"ATRIB": ("s", 31), "MAIS": ("s", 25), "MENOS": ("s", 26), "MAIOR": ("s", 32), "MENOR": ("s", 33), "DIF": ("s", 34)}, 
        "GOTO": {}},
    22: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 22), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 36, "Termo": 15, "Fator": 16, "Vali": 35}},
    23: {"ACTION": {"PARD": ("s", 37)},
        "GOTO": {}},
    24: {"ACTION": {"VAR": ("r", 5), "SE": ("r", 5), "ENQUANTO": ("r", 5), "CHAD": ("r", 5), "$": ("r", 5)}, 
        "GOTO": {}},
    25: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Termo": 38, "Fator": 16}},
    26: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Termo": 39, "Fator": 16}},
    27: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Fator": 40}},
    28: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Fator": 41}},
    29: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("s", 42)}, 
        "GOTO": {}},     
    30: {"ACTION": {"CHAE": ("s", 44)}, 
        "GOTO": {"Bloco": 43}},
    31: {"ACTION": {"ATRIB": ("s", 45)}, 
        "GOTO": {}},
    32: {"ACTION": {"VAR": ("s", 19), "ATRIB": ("s", 47), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 46, "Termo": 15, "Fator": 16}},
    33: {"ACTION": {"VAR": ("s", 19), "ATRIB": ("s", 49), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 48, "Termo": 15, "Fator": 16}},
    34: {"ACTION": {"ATRIB": ("s", 50)}, 
        "GOTO": {}},  
    35: {"ACTION": {"PARD": ("s", 51)}, 
        "GOTO": {}},
    36: {"ACTION": {"ATRIB": ("s", 31), "MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("s", 42), "MAIOR": ("s", 32), "MENOR": ("s", 33), "DIF": ("s", 34)}, 
        "GOTO": {}},  
    37: {"ACTION": {"CHAE": ("s", 44)}, 
        "GOTO": {"Bloco": 52}},
    38: {"ACTION": {"ATRIB": ("r", 6), "PVIRGULA": ("r", 6), "MAIS": ("r", 6), "MENOS": ("r", 6), "MULTI": ("s", 27), "DIV": ("s", 28), "PARD": ("r", 6), "MAIOR": ("r", 6), "MENOR": ("r", 6), "DIF": ("r", 6)}, 
        "GOTO": {}},
    39: {"ACTION": {"ATRIB": ("r", 7), "PVIRGULA": ("r", 7), "MAIS": ("r", 7), "MENOS": ("r", 7), "MULTI": ("s", 27), "DIV": ("s", 28), "PARD": ("r", 7), "MAIOR": ("r", 7), "MENOR": ("r", 7), "DIF": ("r", 7)}, 
        "GOTO": {}},
    40: {"ACTION": {"ATRIB": ("r", 9), "PVIRGULA": ("r", 9), "MAIS": ("r", 9), "MENOS": ("r", 9), "MULTI": ("r", 9), "DIV": ("r", 9), "PARD": ("r", 9), "MAIOR": ("r", 9), "MENOR": ("r", 9), "DIF": ("r", 9)}, 
        "GOTO": {}},
    41: {"ACTION": {"ATRIB": ("r", 10), "PVIRGULA": ("r", 10), "MAIS": ("r", 10), "MENOS": ("r", 10), "MULTI": ("r", 10), "DIV": ("r", 10), "PARD": ("r", 10), "MAIOR": ("r", 10), "MENOR": ("r", 10), "DIF": ("r", 10)}, 
        "GOTO": {}},
    42: {"ACTION": {"ATRIB": ("r", 12), "PVIRGULA": ("r", 12), "MAIS": ("r", 12), "MENOS": ("r", 12), "MULTI": ("r", 12), "DIV": ("r", 12), "PARD": ("r", 12), "MAIOR": ("r", 12), "MENOR": ("r", 12), "DIF": ("r", 12)}, 
        "GOTO": {}},
    43: {"ACTION": {"VAR": ("r", 15), "SE": ("r", 15), "SENAO": ("s", 53), "ENQUANTO": ("r", 15), "CHAD": ("r", 15), "$": ("r", 15)}, 
        "GOTO": {}},
    44: {"ACTION": {"VAR": ("s", 5), "SE": ("s", 6), "ENQUANTO": ("s", 7), "CHAD": ("r", 4), "$": ("r", 4)}, 
        "GOTO": {"Prog": 54, "Decl": 2, "Cond": 3, "Loop": 4}},
    45: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 55, "Termo": 15, "Fator": 16}},
    46: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("r", 19)}, 
        "GOTO": {}},  
    47: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 56, "Termo": 15, "Fator": 16}},
    48: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("r", 20)}, 
        "GOTO": {}},  
    49: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 57, "Termo": 15, "Fator": 16}},
    50: {"ACTION": {"VAR": ("s", 19), "PARE": ("s", 17), "NUM": ("s", 18)}, 
        "GOTO": {"Expr": 58, "Termo": 15, "Fator": 16}},
    51: {"ACTION": {"PARD": ("r", 24)}, 
        "GOTO": {}},
    52: {"ACTION": {"VAR": ("r", 17), "SE": ("r", 17), "ENQUANTO": ("r", 17), "CHAD": ("r", 17), "$": ("r", 17)}, 
        "GOTO": {}},
    53: {"ACTION": {"CHAE": ("s", 44)}, 
        "GOTO": {"Bloco": 59}},
    54: {"ACTION": {"CHAD": ("s", 60)}, 
        "GOTO": {}},
    55: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("r", 18)}, 
        "GOTO": {}},  
    56: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("r", 21)}, 
        "GOTO": {}},  
    57: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("r", 22)}, 
        "GOTO": {}},  
    58: {"ACTION": {"MAIS": ("s", 25), "MENOS": ("s", 26), "PARD": ("r", 23)}, 
        "GOTO": {}},  
    59: {"ACTION": {"VAR": ("r", 16), "SE": ("r", 16), "ENQUANTO": ("r", 16), "CHAD": ("r", 16), "$": ("r", 16)}, 
        "GOTO": {}},  
    60: {"ACTION": {"VAR": ("r", 25), "SE": ("r", 25), "SENAO": ("r", 25), "ENQUANTO": ("r", 25), "CHAD": ("r", 25), "$": ("r", 25)}, 
        "GOTO": {}}, 
}


# pilha = []
# #pilha.append(3)        adicionar elemento no topo
# #topo = pilha.pop()     remover elemento do topo
# #pilha[-1]              verificar elemento no topo

# print(gramatica[12].simbolo + str(gramatica[12].prod) )

class AnalisadorSLR:
    def __init__(self, tabela_slr):
        self.tabela_slr = tabela_slr

    def analisar(self, fita):
        # Empilha o estado inicial
        pilha = [0]
        i = 0
        fita.append(('',"$",''))

        while True:
            estado_atual = pilha[-1]
            simbolo_atual = fita[i][1]
            print(f'Estado atual: {estado_atual}')
            print(f'Simbolo atual: {simbolo_atual}')
            print(f'Pilha: {pilha}')

            if estado_atual in self.tabela_slr and simbolo_atual in self.tabela_slr[estado_atual]["ACTION"]:
                acao = self.tabela_slr[estado_atual]["ACTION"][simbolo_atual]

                if acao[0] == "s":
                    # Adiciona o novo estado à pilha
                    pilha.append(acao[1])
                    # Avança para o próximo token da fita (não reduz a fita, apenas percorre)
                    i += 1 
                    print(f'Shift: {acao[1]}')

                elif acao[0] == "r":
                    regra = acao[1]
                    # Recupera a produção correspondente
                    producao = gramatica[regra].prod

                    # Remove os símbolos da pilha de acordo com o tamanho da produção
                    for _ in range(len(producao)):
                        print(f'Reduce: Topo: {pilha[-1]} - Regra: {regra}')
                        pilha.pop()

                    # No estado que restou no topo da pilha, ele faz o GOTO com o símbolo que fez a redução
                    novo_estado = self.tabela_slr[pilha[-1]]["GOTO"][gramatica[regra].simbolo]
                    print(f'Goto: {novo_estado}')
                    pilha.append(novo_estado)

                elif acao[0] == "acc":
                    print("Análise sintática concluída com sucesso!")
                    return True
                
                print()

            else:
                print(f"Erro de análise sintática na linha {fita[i][0]} em {fita[i][2]}")
                return False

analisador = AnalisadorSLR(slr)
resultado = analisador.analisar(fita)

print("Resultado da análise:", resultado)
